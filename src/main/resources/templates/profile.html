<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Profile</title>
</head>
<body>
  <div>
    Username:
    <label th:text="${user.username}"></label>
  </div>
  <!-- Table of Followed list -->
  <table id="userFollowed">
    <thead>
      <tr>
        <th>
          <h3>Users followed</h3>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr
        th:if="${user.followedUsers == null or user.followedUsers.empty}">
        <td>No Users</td>
      </tr>
      <tr
        th:unless="${user.followedUsers == null or user.followedUsers.empty}"
        th:each="followed : ${user.followedUsers}">
        <td>
          <a th:href="@{'/profile/' + ${followed.username}}">
            <span th:text="${followed.username}"></span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- Table of Games list -->
  <table id="games">
    <thead>
      <tr>
        <th>
          <h3>Games</h3>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr th:if="${user.games == null or user.games.empty}">
        <td>No Games</td>
      </tr>
      <tr th:unless="${user.games == null or user.games.empty}"
        th:each="game : ${user.games}">
        <td>
          <a th:href="@{'/profile/' + ${game.name}}">
            <span th:text="${game.name}"></span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
  <a th:href="@{/}">Homepage</a>
  <div th:if="${isLogged and not isMyProfile}">
    <div th:unless="${isAlreadyFollowed}">
      <form name="addToFollowed_form" th:action="@{/addUser}"
        method="post">
        <input type="hidden" th:value="${user.username}"
          name="followedToAdd" />
        <button type="submit" name="btn_add">Add to followed</button>
      </form>
    </div>
  </div>
  <div th:if="${isLogged and isMyProfile}">
    <form name="changePassword_form" th:action="@{/changePassword}"
      th:object="${changePasswordForm}" method="post">
      <p>Change password:</p>
      <label for="oldPassword">Old password:</label>
      <input type="text" th:field="*{oldPassword}" />
      <label for="newPassword">New password:</label>
      <input type="text" th:field="*{newPassword}" />
      <button type="submit" name="btn_change">Change password</button>
    </form>
  </div>
</body>
</html>